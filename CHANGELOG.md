# æ›´æ–°æ—¥å¿—

## [1.0.3] - 2025-10-26

### ğŸ› Bug ä¿®å¤

- **ä¿®å¤ç”¨æˆ·ç¡®è®¤æµç¨‹**
  - é—®é¢˜ï¼šåœ¨ç”¨æˆ·è¾“å…¥ y/n ç¡®è®¤ä¹‹å‰å°±å·²ç»è‡ªåŠ¨ç™»å½•
  - åŸå› ï¼šSSH è®¤è¯é˜¶æ®µå°±å°†çŠ¶æ€è®¾ç½®ä¸º `success`
  - è§£å†³æ–¹æ¡ˆï¼šå¼•å…¥ `authenticating` ä¸­é—´çŠ¶æ€
    - SSH è®¤è¯æ—¶è®¾ç½®ä¸º `authenticating`ï¼ˆç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼‰
    - ç”¨æˆ·è¾“å…¥ `y` ç¡®è®¤åæ‰è®¾ç½®ä¸º `success`
    - ç”¨æˆ·è¾“å…¥å…¶ä»–å­—ç¬¦è®¾ç½®ä¸º `denied`

### âœ¨ åŠŸèƒ½æ”¹è¿›

- **æ–°å¢ `authenticating` çŠ¶æ€**
  - è¡¨ç¤ºç”¨æˆ·å·²é€šè¿‡ SSH è¿æ¥ï¼Œæ­£åœ¨ç­‰å¾…ç¡®è®¤
  - API è¿”å›ï¼š"ç­‰å¾…ç”¨æˆ·ç¡®è®¤é‰´æƒè¯·æ±‚"
  - å‰ç«¯æ˜¾ç¤ºï¼š"â³ ç­‰å¾…ç”¨æˆ·åœ¨ç»ˆç«¯ç¡®è®¤é‰´æƒè¯·æ±‚..."

### ğŸ“š æ–‡æ¡£æ›´æ–°

- æ›´æ–° `API.md` æ·»åŠ  `authenticating` çŠ¶æ€è¯´æ˜
- æ›´æ–°çŠ¶æ€æµç¨‹å›¾

### ğŸ”„ å½±å“çš„æ–‡ä»¶

- `auth-ssh-service.js` - ä¿®å¤è®¤è¯æµç¨‹
- `demo-app.js` - å¤„ç† authenticating çŠ¶æ€
- `public/index.html` - æ˜¾ç¤ºç­‰å¾…ç¡®è®¤æ¶ˆæ¯
- `API.md` - æ·»åŠ æ–°çŠ¶æ€æ–‡æ¡£

---

## [1.0.2] - 2025-10-26

### âœ¨ æ–°åŠŸèƒ½

- **é‰´æƒç”¨é€”æ˜¾ç¤º**
  - API æ”¯æŒä¼ é€’ `purpose` å‚æ•°ï¼Œè¯´æ˜é‰´æƒç”¨é€”
  - SSH è¿æ¥æ—¶å‘ç”¨æˆ·æ˜¾ç¤ºé‰´æƒç”¨é€”ä¿¡æ¯
  - Demo åº”ç”¨è‡ªåŠ¨ä¼ é€’ç”¨é€”ï¼š"ç™»å½•åˆ°ç³»ç»Ÿ - ç”¨æˆ·: {username}"
  
- **ç”¨æˆ·ç¡®è®¤æœºåˆ¶**
  - SSH è¿æ¥æ—¶è¦æ±‚ç”¨æˆ·ç¡®è®¤é‰´æƒè¯·æ±‚
  - ç”¨æˆ·è¾“å…¥ `y` åŒæ„ï¼Œè¾“å…¥å…¶ä»–å­—ç¬¦æ‹’ç»
  - æ‹’ç»åè¿”å› `denied` çŠ¶æ€
  - æ”¯æŒé€€æ ¼é”®ç¼–è¾‘è¾“å…¥

### ğŸ¨ ç•Œé¢ä¼˜åŒ–

- **ä¿®å¤ SSH å®¢æˆ·ç«¯æ’ç‰ˆ**
  - ä½¿ç”¨ `\r\n` æ›¿ä»£ `\n` ç¡®ä¿æ­£ç¡®æ¢è¡Œ
  - ä¼˜åŒ–æç¤ºä¿¡æ¯çš„å¯¹é½å’Œæ ¼å¼
  - æ·»åŠ ç¾è§‚çš„è¾¹æ¡†å’Œåˆ†éš”çº¿
  - ä½¿ç”¨ emoji å›¾æ ‡å¢å¼ºå¯è¯»æ€§

### ğŸ”§ API æ›´æ–°

- **POST /api/auth/generate-code**
  - æ–°å¢å¯é€‰å‚æ•°ï¼š`purpose`ï¼ˆé‰´æƒç”¨é€”è¯´æ˜ï¼‰
  - å“åº”ä¸­è¿”å› `purpose` å­—æ®µ
  
- **GET /api/auth/verify/:code**
  - æ–°å¢çŠ¶æ€ï¼š`denied`ï¼ˆç”¨æˆ·æ‹’ç»é‰´æƒï¼‰
  - æ›´æ–°çŠ¶æ€è¯´æ˜æ–‡æ¡£

### ğŸ“š æ–‡æ¡£æ›´æ–°

- æ›´æ–° `API.md` æ·»åŠ  `purpose` å‚æ•°è¯´æ˜
- æ·»åŠ  `denied` çŠ¶æ€çš„æ–‡æ¡£è¯´æ˜
- æ›´æ–°å·¥ä½œæµç¨‹å›¾ï¼ŒåŒ…å«ç”¨æˆ·ç¡®è®¤æ­¥éª¤
- æ›´æ–°æ‰€æœ‰ç¤ºä¾‹ä»£ç 

### ğŸ”„ å½±å“çš„æ–‡ä»¶

- `auth-ssh-service.js` - SSH äº¤äº’é€»è¾‘ã€API æ›´æ–°
- `demo-app.js` - ä¼ é€’ç”¨é€”å‚æ•°ã€å¤„ç† denied çŠ¶æ€
- `public/index.html` - å‰ç«¯å¤„ç† denied çŠ¶æ€
- `API.md` - å®Œæ•´çš„ API æ–‡æ¡£æ›´æ–°

---

## [1.0.1] - 2025-10-26

### ğŸ› Bug ä¿®å¤

- **ä¿®å¤ ssh2 æ¨¡å—å¯¼å…¥é”™è¯¯**
  - é—®é¢˜ï¼šåœ¨ Node.js v22+ ä¸­ï¼Œ`ssh2` ä½œä¸º CommonJS æ¨¡å—æ— æ³•ä½¿ç”¨å‘½åå¯¼å…¥
  - é”™è¯¯ä¿¡æ¯ï¼š`SyntaxError: Named export 'Server' not found`
  - è§£å†³æ–¹æ¡ˆï¼šæ”¹ç”¨é»˜è®¤å¯¼å…¥æ–¹å¼
  ```javascript
  // ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰
  import { Server } from 'ssh2';
  
  // ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰
  import pkg from 'ssh2';
  const { Server } = pkg;
  ```
  - å½±å“æ–‡ä»¶ï¼š`auth-ssh-service.js`

### ğŸ“š æ–‡æ¡£æ›´æ–°

- åœ¨ `TROUBLESHOOTING.md` ä¸­æ·»åŠ äº† ssh2 æ¨¡å—å¯¼å…¥é”™è¯¯çš„è§£å†³æ–¹æ¡ˆ
- è¯´æ˜äº† CommonJS å’Œ ESM æ¨¡å—å…¼å®¹æ€§é—®é¢˜

---

## [1.0.0] - 2025-10-26

### âœ¨ åˆå§‹ç‰ˆæœ¬

#### æ ¸å¿ƒåŠŸèƒ½

- **SSH è®¤è¯æœåŠ¡** (`auth-ssh-service.js`)
  - âœ… çœŸå® SSH æœåŠ¡å™¨å®ç°ï¼ˆåŸºäº ssh2ï¼‰
  - âœ… HTTP API æ¥å£ï¼ˆç”ŸæˆéªŒè¯ç ã€æŸ¥è¯¢çŠ¶æ€ï¼‰
  - âœ… ä¸´æ—¶éªŒè¯ç ç®¡ç†ï¼ˆ5 åˆ†é’Ÿè¿‡æœŸï¼‰
  - âœ… è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
  - âœ… æ”¯æŒæ‰€æœ‰æ ‡å‡† SSH å¯†é’¥ç±»å‹

- **Demo åº”ç”¨** (`demo-app.js`)
  - âœ… ç”¨æˆ·æ³¨å†Œå’Œç®¡ç†
  - âœ… å¯†ç ç™»å½•ï¼ˆbcrypt åŠ å¯†ï¼‰
  - âœ… SSH å…¬é’¥ç™»å½•
  - âœ… SSH å…¬é’¥ç®¡ç†ï¼ˆæ·»åŠ ã€æŸ¥çœ‹ã€åˆ é™¤ï¼‰
  - âœ… JWT ä»¤ç‰Œè®¤è¯
  - âœ… JSON æ–‡ä»¶å­˜å‚¨

- **å‰ç«¯ç•Œé¢** (`public/index.html`)
  - âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•è¡¨å•
  - âœ… SSH ç™»å½•ç•Œé¢
  - âœ… SSH å…¬é’¥ç®¡ç†
  - âœ… ç°ä»£åŒ– UI è®¾è®¡
  - âœ… å®æ—¶è½®è¯¢æœºåˆ¶

#### æ–‡æ¡£

- âœ… `README.md` - å®Œæ•´é¡¹ç›®æ–‡æ¡£
- âœ… `API.md` - API è¯¦ç»†æ–‡æ¡£
- âœ… `QUICK_START.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… `ARCHITECTURE.md` - ç³»ç»Ÿæ¶æ„æ–‡æ¡£
- âœ… `EXAMPLES.md` - ä»£ç ç¤ºä¾‹
- âœ… `TROUBLESHOOTING.md` - æ•…éšœæ’é™¤æŒ‡å—
- âœ… `PROJECT_SUMMARY.md` - é¡¹ç›®æ€»ç»“
- âœ… `ä½¿ç”¨è¯´æ˜.md` - ä¸­æ–‡ç®€è¦è¯´æ˜
- âœ… `START_HERE.md` - æ–°ç”¨æˆ·å…¥é—¨æŒ‡å—

#### æŠ€æœ¯æ ˆ

- Node.js >= 14.0.0
- Express.js 4.18.2
- ssh2 1.15.0
- bcrypt 5.1.1
- jsonwebtoken 9.0.2
- uuid 9.0.1
- cors 2.8.5

#### å®‰å…¨ç‰¹æ€§

- âœ… å¯†ç  bcrypt åŠ å¯†
- âœ… JWT ä»¤ç‰Œè®¤è¯
- âœ… éªŒè¯ç è‡ªåŠ¨è¿‡æœŸ
- âœ… å…¬é’¥ä¸¥æ ¼åŒ¹é…éªŒè¯
- âœ… CORS é…ç½®

---

## å…¼å®¹æ€§è¯´æ˜

### Node.js ç‰ˆæœ¬

- **æ¨èç‰ˆæœ¬**ï¼šNode.js 18 LTS æˆ– 20 LTS
- **æœ€ä½ç‰ˆæœ¬**ï¼šNode.js 14.0.0
- **å·²æµ‹è¯•ç‰ˆæœ¬**ï¼šNode.js v22.13.0

### æ“ä½œç³»ç»Ÿ

- âœ… Windows 10/11
- âœ… Linux (Ubuntu, Debian, CentOS ç­‰)
- âœ… macOS 10.15+

### å·²çŸ¥é—®é¢˜

1. **Windows ç«¯å£ 22**
   - éœ€è¦ç®¡ç†å‘˜æƒé™
   - å»ºè®®ä½¿ç”¨ç«¯å£ 2222

2. **bcrypt ç¼–è¯‘**
   - Windows å¯èƒ½éœ€è¦ windows-build-tools
   - Linux éœ€è¦ build-essential

3. **ssh2 æ¨¡å—**
   - v1.0.1 å·²ä¿®å¤ ESM å¯¼å…¥é—®é¢˜

---

## å‡çº§æŒ‡å—

### ä» 1.0.0 å‡çº§åˆ° 1.0.1

å¦‚æœæ‚¨å·²ç»ä¸‹è½½äº† 1.0.0 ç‰ˆæœ¬ï¼š

1. **æ›´æ–°ä»£ç **
   
   ä¿®æ”¹ `auth-ssh-service.js` çš„ç¬¬ 1-2 è¡Œï¼š
   ```javascript
   // å°†è¿™ä¸¤è¡Œ
   import { Server } from 'ssh2';
   
   // æ”¹ä¸º
   import pkg from 'ssh2';
   const { Server } = pkg;
   ```

2. **é‡å¯æœåŠ¡**
   ```bash
   # åœæ­¢å½“å‰æœåŠ¡ï¼ˆCtrl+Cï¼‰
   # é‡æ–°å¯åŠ¨
   npm run start:auth
   ```

3. **éªŒè¯ä¿®å¤**
   - åº”è¯¥ä¸å†å‡ºç° "Named export 'Server' not found" é”™è¯¯
   - SSH æœåŠ¡æ­£å¸¸å¯åŠ¨

---

## è´¡çŒ®

æ„Ÿè°¢æ‰€æœ‰æŠ¥å‘Šé—®é¢˜å’Œæä¾›åé¦ˆçš„ç”¨æˆ·ï¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueã€‚

